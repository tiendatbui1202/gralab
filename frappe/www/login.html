{% extends "templates/web.html" %}
{% macro logo_section(title=null, subtitle=null) %}

<div class="login-header">

	<img class="logo-icon" src="{{ logo }}">

	{% if title %}

	<h2>{{ _(title)}}</h2>

	{% else %}

	<h2>{{ _('Sign In') }}</h2>

	{% endif %}

	{% if subtitle %}

	<p>{{ _(subtitle) }}</p>

	{% endif %}

</div>

{% endmacro %}

{% macro email_login_body() -%}

{% if not disable_user_pass_login or (ldap_settings and ldap_settings.enabled) %}

<div class="form-group">

	<div class="input-wrapper">

		<input type="text" id="login_email" name="email" required autofocus autocomplete="username" placeholder=" ">

		<label for="login_email">{{ login_label or _("Email")}}</label>

		<span class="input-line"></span>

	</div>

</div>



<div class="form-group">

	<div class="input-wrapper password-wrapper">

		<input type="password" id="login_password" name="password" required autocomplete="current-password" placeholder=" ">

		<label for="login_password">{{ _("Password") }}</label>

		<button type="button" class="password-toggle" toggle="#login_password" aria-label="Toggle password visibility">

			<span class="toggle-icon"></span>

		</button>

		<span class="input-line"></span>

	</div>

</div>



{% if not disable_user_pass_login %}

<div class="form-options">

	{# Giữ lại chức năng "Forgot Password" của 2.html #}

	<a href="#forgot" class="forgot-password">{{ _("Forgot Password?") }}</a>

</div>

{% endif %}

{% endif %}

{% endmacro %}

{% block head_include %}
{{ include_style('login.bundle.css') }}
{% endblock %}


{% block page_content %}

<div class="login-container">

	<noscript>

		<div class="text-center my-5">

			<h4>{{ _("Javascript is disabled on your browser") }}</h4>

			<p class="text-muted">

				{{ _("You need to enable JavaScript for your app to work.") }}<br>{{ _("To enable it follow the instructions in
				the following link: {0}").format("<a href='https://enable-javascript.com/'>enable-javascript.com</a></p>") }}

		</div>

	</noscript>



	<section class='for-login'>

		<div class="login-card">
			{{ logo_section(title=_('Sign In'), subtitle=_('Access your account')) }}
			<form class="login-form form-login" role="form">

				{{ email_login_body() }}
				<div class="form-actions">

					{% if not disable_user_pass_login %}

					<button class="login-btn btn btn-login" type="submit">

						<span class="btn-text">{{ _("Login") }}</span>

						<span class="btn-loader"></span>

						<span class="btn-glow"></span>

					</button>

					{% endif %}



					{% if ldap_settings and ldap_settings.enabled %}

					<button class="social-btn btn-block btn-login btn-ldap-login" style="margin-top: 10px;">

						<span>{{ _("Login with LDAP") }}</span>

					</button>

					{% endif %}

				</div>



				{%- if social_login or login_with_email_link or login_with_frappe_cloud_url -%}

				<div class="divider">

					<span>{{ _("or") }}</span>

				</div>



				<div class="social-login">

					{% for provider in provider_logins %}

					<a href="{{ provider.auth_url }}" class="social-btn btn-{{ provider.name }}">

						{% if provider.icon %}{{ provider.icon }}{% endif %}

						<span>{{ _("Login with {0}").format(provider.provider_name) }}</span>

					</a>

					{% endfor %}



					{% if login_with_frappe_cloud_url %}

					<a href="{{ login_with_frappe_cloud_url }}" class="social-btn">

						{# SVG icon from 2.html can be placed here if needed #}

						<span>{{ _("Login with Frappe Cloud") }}</span>

					</a>

					{% endif %}



					{% if login_with_email_link %}

					<a href="#login-with-email-link" class="social-btn">

						<span>{{ _("Login with Email Link") }}</span>

					</a>

					{% endif %}

				</div>

				{%- endif -%}

			</form>



			{%- if not disable_signup and not disable_user_pass_login -%}

			<div class="signup-link">

				<p>{{ _("Don't have an account?") }} <a href="#signup">{{ _("Sign up") }}</a></p>

			</div>

			{%- endif -%}

		</div>

	</section>



	<section class='for-signup {{ "signup-disabled" if disable_signup else "" }}'>

		<div class="login-card">

			{{ logo_section(_('Create a {0} Account').format(app_name or _("Gralab")), subtitle=_("It's quick and easy.")) }}



			{%- if not disable_signup -%}

			{{ signup_form_template }}

			{%- else -%}

			<div class='page-card-body text-center'>

				<h3 class='mb-4'>{{_("Signup Disabled")}}</h3>

				<p class="text-muted text-normal sign-up-message mt-1 mb-8">{{_("Signups have been disabled for this
					website.")}}</p>

				<div><a href='/' class='btn btn-primary btn-md'>{{ _("Home") }}</a></div>

			</div>

			{%- endif -%}

		</div>

	</section>



	<section class='for-forgot'>

		<div class="login-card">

			{{ logo_section('Forgot Password', 'Reset your password') }}

			<form class="login-form form-forgot hide" role="form">

				<div class="form-group">

					<div class="input-wrapper">

						<input type="email" id="forgot_email" required autofocus autocomplete="username" placeholder=" ">

						<label for="forgot_email">{{ _('Email Address') }}</label>

						<span class="input-line"></span>

					</div>

				</div>

				<div class="form-actions">

					<button class="login-btn btn btn-forgot" type="submit">

						<span class="btn-text">{{ _("Reset Password") }}</span>

						<span class="btn-loader"></span>

						<span class="btn-glow"></span>

					</button>

				</div>

			</form>

			<div class="signup-link">

				<p><a href="#login">{{ _("Back to Login") }}</a></p>

			</div>

		</div>

	</section>



	<section class='for-login-with-email-link'>

		<div class="login-card">

			{{ logo_section(_('Login with Email Link'), _('We will send a magic link to your email.')) }}

			<form class="login-form form-login-with-email-link hide" role="form">

				<div class="form-group">

					<div class="input-wrapper">

						<input type="email" id="login_with_email_link_email" required autofocus autocomplete="username"
							placeholder=" ">

						<label for="login_with_email_link_email">{{ _('Email Address') }}</label>

						<span class="input-line"></span>

					</div>

				</div>

				<div class="form-actions">

					<button class="login-btn btn btn-login-with-email-link" type="submit">

						<span class="btn-text">{{ _("Send Login Link") }}</span>

						<span class="btn-loader"></span>

						<span class="btn-glow"></span>

					</button>

				</div>

			</form>

			<div class="signup-link">

				<p><a href="#login">{{ _("Back to Login") }}</a></p>

			</div>

		</div>

	</section>



	<div class="background-effects">

		<div class="glow-orb glow-orb-1"></div>

		<div class="glow-orb glow-orb-2"></div>

		<div class="glow-orb glow-orb-3"></div>

	</div>

</div>

{% endblock %}
{% block script %}

<script>{% include "templates/includes/login/login.js" %}</script>
{% endblock %}
{% block navbar %}{% endblock %}

{% block sidebar %}{% endblock %}
{% block footer %}{% endblock %}